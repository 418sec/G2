{"componentChunkName":"component---node-modules-antv-gatsby-theme-antv-0-10-46-antv-gatsby-theme-antv-site-templates-document-tsx","path":"/en/docs/manual/developer/registerfacet","result":{"data":{"site":{"siteMetadata":{"title":"G2","githubUrl":"https://github.com/antvis/g2","docs":[{"slug":"manual/tutorial","title":{"zh":"基础教程","en":"Tutorials"},"order":3},{"slug":"manual/dataset","title":{"zh":"DataSet","en":"DataSet"},"order":5},{"slug":"manual/concepts","title":{"zh":"核心概念","en":"Main Concepts"},"order":6},{"slug":"manual/concepts/geometry","title":{"zh":"几何标记与图表类型","en":"Geometry and Charts"},"order":6},{"slug":"manual/developer","title":{"zh":"开发者教程","en":"For Developers"},"order":7},{"slug":"api","title":{"zh":"API 文档","en":"API Doc"},"order":null},{"slug":"api/classes","title":{"zh":"Classes","en":"Classes"},"order":1},{"slug":"api/enums","title":{"zh":"Enums","en":"Enums"},"order":2},{"slug":"api/interfaces","title":{"zh":"Interfaces","en":"Interfaces"},"order":3},{"slug":"api/modules","title":{"zh":"Modules","en":"Modules"},"order":4}]},"pathPrefix":""},"markdownRemark":{"html":"<h2 id=\"简介\" style=\"position:relative;\"><a href=\"#%E7%AE%80%E4%BB%8B\" aria-label=\"简介 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>简介</h2>\n<p>分面（Facet）是指利用 G2 提供的 View 递归嵌套能力，可以根据一定的规则对画布的分割画布，形成多个子 View，然后在子 View 中绘制对应的数据和图形，常用于多维数据分析。</p>\n<p>G2 的分面大概的使用方式如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token operator\">:</span> <span class=\"token string\">'#container'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">facet</span><span class=\"token punctuation\">(</span>facatType<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>facetConfig<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>目前 G2 内置的分面包括五种：</p>\n<ul>\n<li>rect</li>\n<li>list</li>\n<li>matrix</li>\n<li>circle</li>\n<li>tree</li>\n</ul>\n<p>具体的使用方式，配置数据结构，见<a href=\"../../api/classes/view/#facet\">分面文档</a>。</p>\n<blockquote>\n<p>如果以上内置分面无法满足自己的定制需求，那么可以尝试 G2 提供的自定义分面能力。</p>\n</blockquote>\n<p>下面我们将介绍如何开发一个自定义分面？这包括几个部分：</p>\n<ol>\n<li>分面子 View 的定位逻辑</li>\n<li>自定义分面机制</li>\n<li>实现自定义分面类</li>\n</ol>\n<h2 id=\"子-view-定位\" style=\"position:relative;\"><a href=\"#%E5%AD%90-view-%E5%AE%9A%E4%BD%8D\" aria-label=\"子 view 定位 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>子 View 定位</h2>\n<p>分面的核心逻辑是将当前 View 大小，根据数据拆分成多个子 view。</p>\n<p>G2 中 View 可以拥有多个子 view，形成无限的嵌套逻辑。而子 View 的大小通过 region 属性来确定自身大小。类型定义如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> Point <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">readonly</span> y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> Region <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">readonly</span> start<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">readonly</span> end<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>其中 start、end 中的 x y 都是 0 ~ 1 的数字，表示子 view 的位置大小占父 view 的比例。举个例子：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> region <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  start<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> x<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  end<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> x<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> <span class=\"token number\">0.5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>view 的 region 为以上数据的时候，那么这个 view 占整个画布空间的上半部分。</p>\n<h2 id=\"自定义分面机制\" style=\"position:relative;\"><a href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%9D%A2%E6%9C%BA%E5%88%B6\" aria-label=\"自定义分面机制 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自定义分面机制</h2>\n<p>G2 提供自定义分面能力，实现并注册一个自定义分面的机制，大概如下代码：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> registerFacet<span class=\"token punctuation\">,</span> Facet <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@antv/g2'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 实现一个自定义分面，继承 G2 分面基类</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyFacet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Facet</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// TODO 实现自己的分面逻辑</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 注册自定义分面到 G2 中</span>\n<span class=\"token function\">registerFacet</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-facet'</span><span class=\"token punctuation\">,</span> Facet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 消费自己的自定义分面</span>\n<span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/*...*/</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">facet</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-facet'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* facetConfig */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 id=\"实现自定义分面\" style=\"position:relative;\"><a href=\"#%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%9D%A2\" aria-label=\"实现自定义分面 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>实现自定义分面</h2>\n<blockquote>\n<p>基于上面自定义分面机制，实现自定义分面的核心内容就是开发自定义分面类 <code class=\"language-text\">MyFacet</code> 。</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Datum<span class=\"token punctuation\">,</span> Facet<span class=\"token punctuation\">,</span> FacetCfg<span class=\"token punctuation\">,</span> FacetData<span class=\"token punctuation\">,</span> View <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@antv/g2'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">MyFacetCfg</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">FacetCfg</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// TODO</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">MyFacetData</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">FacetData</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// TODO</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyFacet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Facet</span><span class=\"token operator\">&lt;</span>MyFacetCfg<span class=\"token punctuation\">,</span> MyFacetData<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">protected</span> <span class=\"token function\">afterEachView</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">,</span> facet<span class=\"token operator\">:</span> MyFacetCfg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">protected</span> <span class=\"token function\">beforeEachView</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">view<span class=\"token operator\">:</span> View<span class=\"token punctuation\">,</span> facet<span class=\"token operator\">:</span> MyFacetCfg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">protected</span> <span class=\"token function\">generateFacets</span><span class=\"token punctuation\">(</span>data<span class=\"token operator\">:</span> Datum<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MyFacetCfg<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">protected</span> <span class=\"token function\">getXAxisOption</span><span class=\"token punctuation\">(</span>\n    x<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    axes<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n    option<span class=\"token operator\">:</span> object<span class=\"token punctuation\">,</span>\n    facet<span class=\"token operator\">:</span> MyFacetCfg<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> object <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">protected</span> <span class=\"token function\">getYAxisOption</span><span class=\"token punctuation\">(</span>\n    y<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n    axes<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\n    option<span class=\"token operator\">:</span> object<span class=\"token punctuation\">,</span>\n    facet<span class=\"token operator\">:</span> MyFacetCfg<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> object <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h3 id=\"1-类型定义\" style=\"position:relative;\"><a href=\"#1-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89\" aria-label=\"1 类型定义 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 类型定义</h3>\n<p>首先定义 Facet 的配置 MyFacetCfg、分面数据的类型定义 MyFacetData。</p>\n<h3 id=\"2-继承基类\" style=\"position:relative;\"><a href=\"#2-%E7%BB%A7%E6%89%BF%E5%9F%BA%E7%B1%BB\" aria-label=\"2 继承基类 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 继承基类</h3>\n<p>继承 G2 提供的基类 Facet，Facet 有 5 个抽象方法必须实现，分别是：</p>\n<ul>\n<li>beforeEachView</li>\n<li>afterEachView</li>\n<li>generateFacets</li>\n<li>getXAxisOption</li>\n<li>getYAxisOption</li>\n<li><strong>beforeEachView、afterEachView</strong></li>\n</ul>\n<p>是初始化每一个子分面 view 的时候的钩子函数，可以用来使用 G2 的 annotation 绘制一些标题等信息。</p>\n<ol start=\"2\">\n<li><strong>generateFacets</strong></li>\n</ol>\n<p>generateFacets  是自定义分面的核心方法。方法返回一个分面数据的数组，每一个分面数据中包含：</p>\n<ul>\n<li>data：分面子 view 的数据</li>\n<li>region：分面子 View 的位置大小信息</li>\n<li>分面标记信息：比如 rect 中行列 index</li>\n<li>其他信息：比如 rect 中，行列的分面字段 field 等等</li>\n<li><strong>getXAxisOption、getYAxisOption</strong></li>\n</ul>\n<p>是根据每个分面来决定是否显示分面 view 中的坐标轴组件。</p>\n<h3 id=\"3-注册使用\" style=\"position:relative;\"><a href=\"#3-%E6%B3%A8%E5%86%8C%E4%BD%BF%E7%94%A8\" aria-label=\"3 注册使用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 注册使用</h3>\n<p>利用 G2 的自定义分面机制来消费使用。</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> registerFacet <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@antv/g2'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 注册</span>\n<span class=\"token function\">registerFacet</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-facet'</span><span class=\"token punctuation\">,</span> MyFacet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 使用</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">facet</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-facet'</span><span class=\"token punctuation\">,</span> MyFacetCfg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 id=\"源码参考\" style=\"position:relative;\"><a href=\"#%E6%BA%90%E7%A0%81%E5%8F%82%E8%80%83\" aria-label=\"源码参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>源码参考</h2>\n<p>具体的实现逻辑，可以参考 G2 源码中<a href=\"https://github.com/antvis/G2/blob/master/src/facet/rect.ts\" target=\"_self\" rel=\"nofollow\"> rect 分面</a>的实现逻辑。</p>","tableOfContents":"<ul>\n<li><a href=\"/en/docs/manual/developer/registerfacet/#%E7%AE%80%E4%BB%8B\">简介</a></li>\n<li><a href=\"/en/docs/manual/developer/registerfacet/#%E5%AD%90-view-%E5%AE%9A%E4%BD%8D\">子 View 定位</a></li>\n<li><a href=\"/en/docs/manual/developer/registerfacet/#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%9D%A2%E6%9C%BA%E5%88%B6\">自定义分面机制</a></li>\n<li>\n<p><a href=\"/en/docs/manual/developer/registerfacet/#%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%9D%A2\">实现自定义分面</a></p>\n<ul>\n<li><a href=\"/en/docs/manual/developer/registerfacet/#1-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89\">1. 类型定义</a></li>\n<li><a href=\"/en/docs/manual/developer/registerfacet/#2-%E7%BB%A7%E6%89%BF%E5%9F%BA%E7%B1%BB\">2. 继承基类</a></li>\n<li><a href=\"/en/docs/manual/developer/registerfacet/#3-%E6%B3%A8%E5%86%8C%E4%BD%BF%E7%94%A8\">3. 注册使用</a></li>\n</ul>\n</li>\n<li><a href=\"/en/docs/manual/developer/registerfacet/#%E6%BA%90%E7%A0%81%E5%8F%82%E8%80%83\">源码参考</a></li>\n</ul>","fields":{"slug":"/en/docs/manual/developer/registerfacet","readingTime":{"text":"2 min read","time":109800.00000000001}},"frontmatter":{"title":"自定义分面"},"parent":{"relativePath":"manual/developer/registerfacet.en.md"}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/en/docs/manual/about-g2"},"frontmatter":{"title":"G2 简介","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/about-g2"},"frontmatter":{"title":"G2 简介","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/developer/registershape"},"frontmatter":{"title":"自定义 Shape","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/developer/registershape"},"frontmatter":{"title":"自定义 Shape","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/overview"},"frontmatter":{"title":"G2 绘图入门","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/overview"},"frontmatter":{"title":"G2 绘图入门","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/dataset/overview"},"frontmatter":{"title":"快速入门","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/dataset/overview"},"frontmatter":{"title":"快速入门","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/history"},"frontmatter":{"title":"G2 演进史","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/history"},"frontmatter":{"title":"G2 演进史","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/geometry/overview"},"frontmatter":{"title":"概览","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/geometry/overview"},"frontmatter":{"title":"概览","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/getting-started"},"frontmatter":{"title":"快速上手","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/getting-started"},"frontmatter":{"title":"快速上手","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/developer/registeranimation"},"frontmatter":{"title":"自定义动画","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/developer/registeranimation"},"frontmatter":{"title":"自定义动画","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/data"},"frontmatter":{"title":"数据","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/data"},"frontmatter":{"title":"数据","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/dataset/dataset"},"frontmatter":{"title":"DataSet","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/dataset/dataset"},"frontmatter":{"title":"DataSet","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/design"},"frontmatter":{"title":"G2 设计思路","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/design"},"frontmatter":{"title":"G2 设计思路","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/geometry/point"},"frontmatter":{"title":"点图 point","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/geometry/point"},"frontmatter":{"title":"点图 point","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts-overview"},"frontmatter":{"title":"G2 基础概念概览","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts-overview"},"frontmatter":{"title":"G2 基础概念概览","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/developer/registerlabel"},"frontmatter":{"title":"自定义 Label","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/developer/registerlabel"},"frontmatter":{"title":"自定义 Label","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/scale"},"frontmatter":{"title":"度量配置","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/scale"},"frontmatter":{"title":"度量配置","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/dataset/connector"},"frontmatter":{"title":"Connector 数据接入","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/dataset/connector"},"frontmatter":{"title":"Connector 数据接入","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/data-flow"},"frontmatter":{"title":"详解 G2 数据处理流程","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/data-flow"},"frontmatter":{"title":"详解 G2 数据处理流程","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/geometry/path-and-line"},"frontmatter":{"title":"路径和线（path && line）","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/geometry/path-and-line"},"frontmatter":{"title":"路径和线（path && line）","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/developer/registerfacet"},"frontmatter":{"title":"自定义分面","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/developer/registerfacet"},"frontmatter":{"title":"自定义分面","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/coordinate"},"frontmatter":{"title":"坐标系配置","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/coordinate"},"frontmatter":{"title":"坐标系配置","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/dataset/transform"},"frontmatter":{"title":"Transform 数据转换","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/dataset/transform"},"frontmatter":{"title":"Transform 数据转换","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/data-and-scales"},"frontmatter":{"title":"数据类型与度量","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/data-and-scales"},"frontmatter":{"title":"数据类型与度量","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/geometry/area"},"frontmatter":{"title":"区域图 area","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/geometry/area"},"frontmatter":{"title":"区域图 area","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/developer/registertheme"},"frontmatter":{"title":"自定义主题","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/developer/registertheme"},"frontmatter":{"title":"自定义主题","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/axis"},"frontmatter":{"title":"坐标轴配置","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/axis"},"frontmatter":{"title":"坐标轴配置","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/visual-channel"},"frontmatter":{"title":"视觉通道","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/visual-channel"},"frontmatter":{"title":"视觉通道","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/geometry/interval"},"frontmatter":{"title":"区间图 interval","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/geometry/interval"},"frontmatter":{"title":"区间图 interval","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/developer/registerinteraction"},"frontmatter":{"title":"自定义交互","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/developer/registerinteraction"},"frontmatter":{"title":"自定义交互","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/tooltip"},"frontmatter":{"title":"Tooltip 配置","order":5}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/tooltip"},"frontmatter":{"title":"Tooltip 配置","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/coordinate"},"frontmatter":{"title":"坐标系","order":5}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/coordinate"},"frontmatter":{"title":"坐标系","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/geometry/polygon"},"frontmatter":{"title":"多边形 Polygon","order":5}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/geometry/polygon"},"frontmatter":{"title":"多边形 Polygon","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/developer/require"},"frontmatter":{"title":"G2 按需加载","order":6}}},{"node":{"fields":{"slug":"/zh/docs/manual/developer/require"},"frontmatter":{"title":"G2 按需加载","order":6}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/legend"},"frontmatter":{"title":"图例配置","order":6}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/legend"},"frontmatter":{"title":"图例配置","order":6}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/geometry/schema"},"frontmatter":{"title":"自定义图 schema","order":6}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/geometry/schema"},"frontmatter":{"title":"自定义图 schema","order":6}}},{"node":{"fields":{"slug":"/en/docs/manual/developer/dive-into-theme"},"frontmatter":{"title":"G2 主题配置项详解","order":7}}},{"node":{"fields":{"slug":"/zh/docs/manual/developer/dive-into-theme"},"frontmatter":{"title":"G2 主题配置项详解","order":7}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/annotation"},"frontmatter":{"title":"图形标注配置","order":7}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/annotation"},"frontmatter":{"title":"图形标注配置","order":7}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/element"},"frontmatter":{"title":"Element","order":7}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/element"},"frontmatter":{"title":"Element","order":7}}},{"node":{"fields":{"slug":"/en/docs/manual/upgrade"},"frontmatter":{"title":"G2 4.0 升级指南","order":8}}},{"node":{"fields":{"slug":"/zh/docs/manual/upgrade"},"frontmatter":{"title":"G2 4.0 升级指南","order":8}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/label"},"frontmatter":{"title":"文本标签配置","order":8}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/label"},"frontmatter":{"title":"文本标签配置","order":8}}},{"node":{"fields":{"slug":"/en/docs/manual/concepts/interaction"},"frontmatter":{"title":"交互语法","order":8}}},{"node":{"fields":{"slug":"/zh/docs/manual/concepts/interaction"},"frontmatter":{"title":"交互语法","order":8}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/animate"},"frontmatter":{"title":"图表动画配置","order":9}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/animate"},"frontmatter":{"title":"图表动画配置","order":9}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/theme"},"frontmatter":{"title":"配置图表主题","order":10}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/theme"},"frontmatter":{"title":"配置图表主题","order":10}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/adjust"},"frontmatter":{"title":"使用数据调整","order":11}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/adjust"},"frontmatter":{"title":"使用数据调整","order":11}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/event"},"frontmatter":{"title":"图表事件使用","order":12}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/event"},"frontmatter":{"title":"图表事件使用","order":12}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/view"},"frontmatter":{"title":"绘制视图 View","order":13}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/view"},"frontmatter":{"title":"绘制视图 View","order":13}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/facet"},"frontmatter":{"title":"绘制分面","order":14}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/facet"},"frontmatter":{"title":"绘制分面","order":14}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/interaction"},"frontmatter":{"title":"为图表配置交互","order":15}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/interaction"},"frontmatter":{"title":"为图表配置交互","order":15}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/draw-basic-charts"},"frontmatter":{"title":"绘制基础图表","order":16}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/draw-basic-charts"},"frontmatter":{"title":"绘制基础图表","order":16}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/draw-multiple-chart"},"frontmatter":{"title":"绘制混合图表","order":17}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/draw-multiple-chart"},"frontmatter":{"title":"绘制混合图表","order":17}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/schema"},"frontmatter":{"title":"使用配置项创建图表","order":18}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/schema"},"frontmatter":{"title":"使用配置项创建图表","order":18}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/slider"},"frontmatter":{"title":"使用滑块","order":19}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/slider"},"frontmatter":{"title":"使用滑块","order":19}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/renderer"},"frontmatter":{"title":"渲染引擎：Canvas or SVG","order":20}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/renderer"},"frontmatter":{"title":"渲染引擎：Canvas or SVG","order":20}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/shape-attrs"},"frontmatter":{"title":"绘图属性速查","order":21}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/shape-attrs"},"frontmatter":{"title":"绘图属性速查","order":21}}}]}},"pageContext":{}}}