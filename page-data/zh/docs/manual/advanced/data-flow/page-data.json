{"componentChunkName":"component---node-modules-antv-gatsby-theme-antv-site-templates-document-tsx","path":"/zh/docs/manual/advanced/data-flow","result":{"data":{"site":{"siteMetadata":{"title":"G2","githubUrl":"https://github.com/antvis/g2","docs":[{"slug":"manual/getting-started","title":{"zh":"快速开始","en":"Getting Started"},"order":0},{"slug":"manual/tutorial","title":{"zh":"使用教程","en":"Tutorial"},"order":1},{"slug":"manual/advanced","title":{"zh":"高级教程","en":"Advanced"},"order":2},{"slug":"manual/faq","title":{"zh":"G2 常见问题","en":"FAQ"},"order":3}]},"pathPrefix":"/g2"},"markdownRemark":{"html":"<p>下面我们以最简单的月份、天气、城市的数据为例说明 G2 的数据处理流程，阐述数据是如何映射至图形空间。</p>\n<p>我们需要在 <code class=\"language-text\">400 px * 200 px</code> 像素区域绘制如下点图（该图只是用于数据流说明，并不具有可视化意义）：</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/rmsportal/oJubdhOQyIDUWXERNQhI.png\" alt=\"image | left\"></p>\n<p>原始数据如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token string\">'一月'</span><span class=\"token punctuation\">,</span> temperature<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'北京'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token string\">'二月'</span><span class=\"token punctuation\">,</span> temperature<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'北京'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token string\">'一月'</span><span class=\"token punctuation\">,</span> temperature<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'南京'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token string\">'二月'</span><span class=\"token punctuation\">,</span> temperature<span class=\"token punctuation\">:</span> <span class=\"token number\">14</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'南京'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>绘图代码：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  id<span class=\"token punctuation\">:</span> <span class=\"token string\">'mountNode'</span><span class=\"token punctuation\">,</span>\n  width<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">200</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">point</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'month*temperature'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'city'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">'#1890FF'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#2FC25B'</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">chart.point().position(&#39;month*temperature&#39;).color(&#39;city&#39;, [ &#39;#1890FF&#39;, &#39;#2FC25B&#39; ]);</code> 含义如下：</p>\n<ol>\n<li>将 <code class=\"language-text\">month</code> 映射到 <code class=\"language-text\">position</code> 位置图形属性的 x 轴方向；</li>\n<li>将 <code class=\"language-text\">temperature</code> 映射到 <code class=\"language-text\">position</code> 位置图形属性的 y 轴方向；</li>\n<li>将 <code class=\"language-text\">city</code> 映射到 <code class=\"language-text\">color</code> 颜色图形属性。使用的颜色是 ['#1890FF', '#2FC25B']</li>\n</ol>\n<h2 id=\"加载数据\"><a href=\"#%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE\" aria-label=\"加载数据 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>加载数据</h2>\n<p>加载数据后，对数据进行处理，处理后结构如表所示：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">一月</td>\n<td align=\"left\">5</td>\n<td align=\"left\">北京</td>\n</tr>\n<tr>\n<td align=\"left\">二月</td>\n<td align=\"left\">10</td>\n<td align=\"left\">北京</td>\n</tr>\n<tr>\n<td align=\"left\">一月</td>\n<td align=\"left\">8</td>\n<td align=\"left\">南京</td>\n</tr>\n<tr>\n<td align=\"left\">二月</td>\n<td align=\"left\">14</td>\n<td align=\"left\">南京</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"对数据进行分组\"><a href=\"#%E5%AF%B9%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E5%88%86%E7%BB%84\" aria-label=\"对数据进行分组 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>对数据进行分组</h2>\n<p>默认我们会根据映射至 <code class=\"language-text\">size</code> <code class=\"language-text\">shape</code> <code class=\"language-text\">color</code> 这三个图形属性的数据属性对数据进行分组。</p>\n<p>这里我们根据 <code class=\"language-text\">city</code> 字段对数据进行分组，如下表所示：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">一月</td>\n<td align=\"left\">5</td>\n<td align=\"left\">北京</td>\n</tr>\n<tr>\n<td align=\"left\">二月</td>\n<td align=\"left\">10</td>\n<td align=\"left\">北京</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">一月</td>\n<td align=\"left\">8</td>\n<td align=\"left\">南京</td>\n</tr>\n<tr>\n<td align=\"left\">二月</td>\n<td align=\"left\">14</td>\n<td align=\"left\">南京</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"保存原始数据\"><a href=\"#%E4%BF%9D%E5%AD%98%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE\" aria-label=\"保存原始数据 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>保存原始数据</h2>\n<p>此时将原始数据保存下来，方便后期 tooltip 取对应的数据进行展示。</p>\n<p>所有的原始数据存储于 <code class=\"language-text\">_origin</code> 属性中。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">一月</td>\n<td align=\"left\">5</td>\n<td align=\"left\">北京</td>\n<td align=\"left\">{\"month\":\"一月\",\"temperature\":5,\"city\":\"北京\"}</td>\n</tr>\n<tr>\n<td align=\"left\">二月</td>\n<td align=\"left\">10</td>\n<td align=\"left\">北京</td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":10,\"city\":\"北京\"}</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">一月</td>\n<td align=\"left\">8</td>\n<td align=\"left\">南京</td>\n<td align=\"left\">{\"month\":\"一月\",\"temperature\":8,\"city\":\"南京\"}</td>\n</tr>\n<tr>\n<td align=\"left\">二月</td>\n<td align=\"left\">14</td>\n<td align=\"left\">南京</td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":14,\"city\":\"南京\"}</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"数据数值化\"><a href=\"#%E6%95%B0%E6%8D%AE%E6%95%B0%E5%80%BC%E5%8C%96\" aria-label=\"数据数值化 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>数据数值化</h2>\n<p>这里 <code class=\"language-text\">month</code> <code class=\"language-text\">city</code> 为分类的类型，我们将其转换为数值（索引值）。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">0</td>\n<td align=\"left\">5</td>\n<td align=\"left\">0</td>\n<td align=\"left\">{month: '一月',temperature: 5,city: '北京'}</td>\n</tr>\n<tr>\n<td align=\"left\">1</td>\n<td align=\"left\">10</td>\n<td align=\"left\">0</td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":10,\"city\":\"北京\"}</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">0</td>\n<td align=\"left\">8</td>\n<td align=\"left\">1</td>\n<td align=\"left\">{\"month\":\"一月\",\"temperature\":8,\"city\":\"南京\"}</td>\n</tr>\n<tr>\n<td align=\"left\">1</td>\n<td align=\"left\">14</td>\n<td align=\"left\">1</td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":14,\"city\":\"南京\"}</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"调整数据-adjust\"><a href=\"#%E8%B0%83%E6%95%B4%E6%95%B0%E6%8D%AE-adjust\" aria-label=\"调整数据 adjust permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>调整数据 adjust</h2>\n<p>此处无调整。</p>\n<h2 id=\"归一化操作\"><a href=\"#%E5%BD%92%E4%B8%80%E5%8C%96%E6%93%8D%E4%BD%9C\" aria-label=\"归一化操作 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>归一化操作</h2>\n<ul>\n<li>由于月份 <code class=\"language-text\">month</code> 是分类类型，又决定 x 轴的位置，需要在坐标轴两端留下空白，所以需要将数据归一化的分布范围从 [0, 1] 调整至 [0.25, 0.75]；</li>\n<li><code class=\"language-text\">city</code> 是分类类型，但是不参与位置运算，所以分布范围仍为 [0, 1]；</li>\n<li><code class=\"language-text\">temperature</code> 是数字类型，原始数值范围为 [5, 14]，但是为了让 y 坐标轴的刻度线均匀分布易于用户阅读理解，G2 会默认对数值进行优化，将数值范围调整为 [0, 20] 使得刻度线均匀分布（默认每条坐标轴绘制 5 个刻度线），即 [0, 5, 10, 15, 20]，然后将原始数值归一化到 [0, 1];</li>\n</ul>\n<p>归一化后的结果：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">0.25</td>\n<td align=\"left\">0.25</td>\n<td align=\"left\">0</td>\n<td align=\"left\">{month: '一月',temperature: 5,city: '北京'}</td>\n</tr>\n<tr>\n<td align=\"left\">0.75</td>\n<td align=\"left\">0.5</td>\n<td align=\"left\">0</td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":10,\"city\":\"北京\"}</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">0.25</td>\n<td align=\"left\">0.4</td>\n<td align=\"left\">1</td>\n<td align=\"left\">{\"month\":\"一月\",\"temperature\":8,\"city\":\"南京\"}</td>\n</tr>\n<tr>\n<td align=\"left\">0.75</td>\n<td align=\"left\">0.7</td>\n<td align=\"left\">1</td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":14,\"city\":\"南京\"}</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"计算绘制图形需要的点\"><a href=\"#%E8%AE%A1%E7%AE%97%E7%BB%98%E5%88%B6%E5%9B%BE%E5%BD%A2%E9%9C%80%E8%A6%81%E7%9A%84%E7%82%B9\" aria-label=\"计算绘制图形需要的点 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>计算绘制图形需要的点</h2>\n<p>对于点图，我们只需要获取 x 和 y 轴的坐标点即可。所以数据处理结果如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">[0.25]</td>\n<td align=\"left\">[0.25]</td>\n<td align=\"left\">0</td>\n<td align=\"left\">{month: '一月',temperature: 5,city: '北京'}</td>\n</tr>\n<tr>\n<td align=\"left\">[0.75]</td>\n<td align=\"left\">[0.5]</td>\n<td align=\"left\">0</td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":10,\"city\":\"北京\"}</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th align=\"left\">month</th>\n<th align=\"left\">temperature</th>\n<th align=\"left\">city</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">[0.25]</td>\n<td align=\"left\">[0.4]</td>\n<td align=\"left\">1</td>\n<td align=\"left\">{\"month\":\"一月\",\"temperature\":8,\"city\":\"南京\"}</td>\n</tr>\n<tr>\n<td align=\"left\">[0.75]</td>\n<td align=\"left\">[0.7]</td>\n<td align=\"left\">1</td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":14,\"city\":\"南京\"}</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"映射至图形属性\"><a href=\"#%E6%98%A0%E5%B0%84%E8%87%B3%E5%9B%BE%E5%BD%A2%E5%B1%9E%E6%80%A7\" aria-label=\"映射至图形属性 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>映射至图形属性</h2>\n<p>由于画布坐标的起始点为左上角，所以 y 轴上的 0.1 转换成画布坐标的结果为 200 - 200 * 0.1</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">x</th>\n<th align=\"left\">y</th>\n<th align=\"left\">color</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">[100]</td>\n<td align=\"left\">[150]</td>\n<td align=\"left\"><span data-type=\"color\" style=\"color:#1890FF\">'#1890FF'</span></td>\n<td align=\"left\">{month: '一月',temperature: 5,city: '北京'}</td>\n</tr>\n<tr>\n<td align=\"left\">[300]</td>\n<td align=\"left\">[100]</td>\n<td align=\"left\"><span data-type=\"color\" style=\"color:#1890FF\">'#1890FF'</span></td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":10,\"city\":\"北京\"}</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th align=\"left\">x</th>\n<th align=\"left\">y</th>\n<th align=\"left\">color</th>\n<th align=\"left\">_origin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">[100]</td>\n<td align=\"left\">[120]</td>\n<td align=\"left\"><span data-type=\"color\" style=\"color:#2FC25B\">'#2FC25B'</span></td>\n<td align=\"left\">{\"month\":\"一月\",\"temperature\":8,\"city\":\"南京\"}</td>\n</tr>\n<tr>\n<td align=\"left\">[300]</td>\n<td align=\"left\">[60]</td>\n<td align=\"left\"><span data-type=\"color\" style=\"color:#2FC25B\">'#2FC25B'</span></td>\n<td align=\"left\">{\"month\":\"二月\",\"temperature\":14,\"city\":\"南京\"}</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"渲染绘制\"><a href=\"#%E6%B8%B2%E6%9F%93%E7%BB%98%E5%88%B6\" aria-label=\"渲染绘制 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>渲染绘制</h2>\n<p>将最后处理的数据交由绘图库进行绘制渲染。</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/rmsportal/oJubdhOQyIDUWXERNQhI.png\" alt=\"image | left\"></p>","tableOfContents":"<ul>\n<li><a href=\"/g2/zh/docs/manual/advanced/data-flow/#%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE\">加载数据</a></li>\n<li><a href=\"/g2/zh/docs/manual/advanced/data-flow/#%E5%AF%B9%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E5%88%86%E7%BB%84\">对数据进行分组</a></li>\n<li><a href=\"/g2/zh/docs/manual/advanced/data-flow/#%E4%BF%9D%E5%AD%98%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE\">保存原始数据</a></li>\n<li><a href=\"/g2/zh/docs/manual/advanced/data-flow/#%E6%95%B0%E6%8D%AE%E6%95%B0%E5%80%BC%E5%8C%96\">数据数值化</a></li>\n<li><a href=\"/g2/zh/docs/manual/advanced/data-flow/#%E8%B0%83%E6%95%B4%E6%95%B0%E6%8D%AE-adjust\">调整数据 adjust</a></li>\n<li><a href=\"/g2/zh/docs/manual/advanced/data-flow/#%E5%BD%92%E4%B8%80%E5%8C%96%E6%93%8D%E4%BD%9C\">归一化操作</a></li>\n<li><a href=\"/g2/zh/docs/manual/advanced/data-flow/#%E8%AE%A1%E7%AE%97%E7%BB%98%E5%88%B6%E5%9B%BE%E5%BD%A2%E9%9C%80%E8%A6%81%E7%9A%84%E7%82%B9\">计算绘制图形需要的点</a></li>\n<li><a href=\"/g2/zh/docs/manual/advanced/data-flow/#%E6%98%A0%E5%B0%84%E8%87%B3%E5%9B%BE%E5%BD%A2%E5%B1%9E%E6%80%A7\">映射至图形属性</a></li>\n<li><a href=\"/g2/zh/docs/manual/advanced/data-flow/#%E6%B8%B2%E6%9F%93%E7%BB%98%E5%88%B6\">渲染绘制</a></li>\n</ul>","fields":{"slug":"/zh/docs/manual/advanced/data-flow","readingTime":{"text":"4 min read","time":204000}},"frontmatter":{"title":"G2 的数据处理流程"},"parent":{"__typename":"File","relativePath":"manual/advanced/data-flow.zh.md"}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/en/docs/manual/getting-started"},"frontmatter":{"title":"快速上手","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/getting-started"},"frontmatter":{"title":"快速上手","order":0}}},{"node":{"fields":{"slug":"/en/docs/api/g2"},"frontmatter":{"title":"G2","order":0}}},{"node":{"fields":{"slug":"/zh/docs/api/g2"},"frontmatter":{"title":"G2","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/chart-composition"},"frontmatter":{"title":"G2 图表组成","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/chart-composition"},"frontmatter":{"title":"G2 图表组成","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/grammar"},"frontmatter":{"title":"图形语法","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/grammar"},"frontmatter":{"title":"图形语法","order":0}}},{"node":{"fields":{"slug":"/en/examples/relation/relation"},"frontmatter":{"title":"Graph","order":0}}},{"node":{"fields":{"slug":"/zh/examples/relation/relation"},"frontmatter":{"title":"关系图","order":0}}},{"node":{"fields":{"slug":"/en/examples/radar/radar"},"frontmatter":{"title":"Radar Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/radar/radar"},"frontmatter":{"title":"雷达图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/point/scatter"},"frontmatter":{"title":"散点图","order":0}}},{"node":{"fields":{"slug":"/en/examples/point/scatter"},"frontmatter":{"title":"Scatter Chart","order":0}}},{"node":{"fields":{"slug":"/en/examples/pie/basic"},"frontmatter":{"title":"Basic Pie Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/pie/basic"},"frontmatter":{"title":"基础饼图","order":0}}},{"node":{"fields":{"slug":"/en/examples/other/other"},"frontmatter":{"title":"Others","order":0}}},{"node":{"fields":{"slug":"/zh/examples/other/other"},"frontmatter":{"title":"其他图表","order":0}}},{"node":{"fields":{"slug":"/en/examples/map/map"},"frontmatter":{"title":"Map","order":0}}},{"node":{"fields":{"slug":"/zh/examples/map/map"},"frontmatter":{"title":"地图","order":0}}},{"node":{"fields":{"slug":"/en/examples/line/basic"},"frontmatter":{"title":"Line Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/line/basic"},"frontmatter":{"title":"基础折线图","order":0}}},{"node":{"fields":{"slug":"/en/examples/heatmap/heatmap"},"frontmatter":{"title":"Heatmap","order":0}}},{"node":{"fields":{"slug":"/zh/examples/heatmap/heatmap"},"frontmatter":{"title":"热力图","order":0}}},{"node":{"fields":{"slug":"/en/examples/gauge/gauge"},"frontmatter":{"title":"Gauge","order":0}}},{"node":{"fields":{"slug":"/zh/examples/gauge/gauge"},"frontmatter":{"title":"仪表盘","order":0}}},{"node":{"fields":{"slug":"/zh/examples/gallery/line"},"frontmatter":{"title":"折线图","order":0}}},{"node":{"fields":{"slug":"/en/examples/gallery/line"},"frontmatter":{"title":"Line Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/funnel/funnel"},"frontmatter":{"title":"漏斗图","order":0}}},{"node":{"fields":{"slug":"/en/examples/funnel/funnel"},"frontmatter":{"title":"Funnel Chart","order":0}}},{"node":{"fields":{"slug":"/en/examples/facet/facet"},"frontmatter":{"title":"Facet","order":0}}},{"node":{"fields":{"slug":"/zh/examples/facet/facet"},"frontmatter":{"title":"分面","order":0}}},{"node":{"fields":{"slug":"/en/examples/component/component"},"frontmatter":{"title":"Chart Components","order":0}}},{"node":{"fields":{"slug":"/zh/examples/component/component"},"frontmatter":{"title":"图表组件","order":0}}},{"node":{"fields":{"slug":"/en/examples/candlestick/demo"},"frontmatter":{"title":"K Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/candlestick/demo"},"frontmatter":{"title":"烛形图","order":0}}},{"node":{"fields":{"slug":"/en/examples/column/basic"},"frontmatter":{"title":"Basic Column Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/column/basic"},"frontmatter":{"title":"基础柱状图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/box/box"},"frontmatter":{"title":"箱型图","order":0}}},{"node":{"fields":{"slug":"/en/examples/box/box"},"frontmatter":{"title":"Box Chart","order":0}}},{"node":{"fields":{"slug":"/en/examples/bar/basic"},"frontmatter":{"title":"Basic Bar Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/bar/basic"},"frontmatter":{"title":"基础条形图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/area/basic"},"frontmatter":{"title":"面积图","order":0}}},{"node":{"fields":{"slug":"/en/examples/area/basic"},"frontmatter":{"title":"Area Chart","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/creating-chart"},"frontmatter":{"title":"创建图表","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/creating-chart"},"frontmatter":{"title":"创建图表","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/data-flow"},"frontmatter":{"title":"G2 的数据处理流程","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/data-flow"},"frontmatter":{"title":"G2 的数据处理流程","order":1}}},{"node":{"fields":{"slug":"/zh/docs/api/chart"},"frontmatter":{"title":"Chart 图表","order":1}}},{"node":{"fields":{"slug":"/en/docs/api/chart"},"frontmatter":{"title":"Chart 图表","order":1}}},{"node":{"fields":{"slug":"/en/examples/pie/donut"},"frontmatter":{"title":"Donut Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/pie/donut"},"frontmatter":{"title":"环图","order":1}}},{"node":{"fields":{"slug":"/en/examples/line/double"},"frontmatter":{"title":"Double Line Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/line/double"},"frontmatter":{"title":"双折线图","order":1}}},{"node":{"fields":{"slug":"/en/examples/gallery/column"},"frontmatter":{"title":"Column Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/gallery/column"},"frontmatter":{"title":"柱状图","order":1}}},{"node":{"fields":{"slug":"/en/examples/column/dodge"},"frontmatter":{"title":"Grouped Column Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/column/dodge"},"frontmatter":{"title":"分组柱状图","order":1}}},{"node":{"fields":{"slug":"/zh/examples/bar/dodge"},"frontmatter":{"title":"分组条形图","order":1}}},{"node":{"fields":{"slug":"/en/examples/bar/dodge"},"frontmatter":{"title":"Grouped Bar Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/area/stacked"},"frontmatter":{"title":"堆叠面积图","order":1}}},{"node":{"fields":{"slug":"/en/examples/area/stacked"},"frontmatter":{"title":"Stacked Area Chart","order":1}}},{"node":{"fields":{"slug":"/en/docs/api/view"},"frontmatter":{"title":"View 视图","order":2}}},{"node":{"fields":{"slug":"/zh/docs/api/view"},"frontmatter":{"title":"View 视图","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/loading-data"},"frontmatter":{"title":"装载数据","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/loading-data"},"frontmatter":{"title":"装载数据","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/data-type-and-scale"},"frontmatter":{"title":"数据类型与度量","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/data-type-and-scale"},"frontmatter":{"title":"数据类型与度量","order":2}}},{"node":{"fields":{"slug":"/en/examples/pie/rose"},"frontmatter":{"title":"Nightingale Rose Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/pie/rose"},"frontmatter":{"title":"南丁格尔玫瑰图","order":2}}},{"node":{"fields":{"slug":"/zh/examples/line/multiple"},"frontmatter":{"title":"多折线图","order":2}}},{"node":{"fields":{"slug":"/en/examples/line/multiple"},"frontmatter":{"title":"multiple line chart","order":2}}},{"node":{"fields":{"slug":"/en/examples/gallery/bar"},"frontmatter":{"title":"Bar Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/gallery/bar"},"frontmatter":{"title":"条形图","order":2}}},{"node":{"fields":{"slug":"/en/examples/column/stack"},"frontmatter":{"title":"Stacked Column Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/column/stack"},"frontmatter":{"title":"堆叠柱状图","order":2}}},{"node":{"fields":{"slug":"/en/examples/bar/stack"},"frontmatter":{"title":"Stacked Bar Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/bar/stack"},"frontmatter":{"title":"堆叠条形图","order":2}}},{"node":{"fields":{"slug":"/en/examples/area/range"},"frontmatter":{"title":"Range Area Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/area/range"},"frontmatter":{"title":"区间面积图","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/data-set"},"frontmatter":{"title":"DataSet","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/data-set"},"frontmatter":{"title":"DataSet","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/deep-into-coord"},"frontmatter":{"title":"坐标系详解","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/deep-into-coord"},"frontmatter":{"title":"坐标系详解","order":3}}},{"node":{"fields":{"slug":"/en/docs/api/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":3}}},{"node":{"fields":{"slug":"/zh/docs/api/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":3}}},{"node":{"fields":{"slug":"/en/examples/pie/nested"},"frontmatter":{"title":"Nested Pie Chart","order":3}}},{"node":{"fields":{"slug":"/zh/examples/pie/nested"},"frontmatter":{"title":"嵌套饼图","order":3}}},{"node":{"fields":{"slug":"/en/examples/line/step"},"frontmatter":{"title":"Step Line Chart","order":3}}},{"node":{"fields":{"slug":"/zh/examples/line/step"},"frontmatter":{"title":"阶梯折线图","order":3}}},{"node":{"fields":{"slug":"/en/examples/gallery/pie"},"frontmatter":{"title":"Pie Chart","order":3}}},{"node":{"fields":{"slug":"/zh/examples/gallery/pie"},"frontmatter":{"title":"饼图","order":3}}},{"node":{"fields":{"slug":"/en/examples/column/histogram"},"frontmatter":{"title":"Histogram","order":3}}},{"node":{"fields":{"slug":"/zh/examples/column/histogram"},"frontmatter":{"title":"直方图","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/faq"},"frontmatter":{"title":"G2 常见问题","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/faq"},"frontmatter":{"title":"G2 常见问题","order":4}}},{"node":{"fields":{"slug":"/en/docs/api/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/zh/docs/api/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/geom-and-adjust"},"frontmatter":{"title":"几何标记和数据调整","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/geom-and-adjust"},"frontmatter":{"title":"几何标记和数据调整","order":4}}},{"node":{"fields":{"slug":"/en/examples/gallery/area"},"frontmatter":{"title":"Area Chart","order":4}}},{"node":{"fields":{"slug":"/zh/examples/gallery/area"},"frontmatter":{"title":"面积图","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/scale-def"},"frontmatter":{"title":"什么是列定义","order":5}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/scale-def"},"frontmatter":{"title":"什么是列定义","order":5}}},{"node":{"fields":{"slug":"/en/docs/api/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":5}}},{"node":{"fields":{"slug":"/zh/docs/api/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/chart-type"},"frontmatter":{"title":"图表类型","order":5}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/chart-type"},"frontmatter":{"title":"图表类型","order":5}}},{"node":{"fields":{"slug":"/en/examples/gallery/gauge"},"frontmatter":{"title":"Gauge","order":5}}},{"node":{"fields":{"slug":"/zh/examples/gallery/gauge"},"frontmatter":{"title":"仪表盘","order":5}}},{"node":{"fields":{"slug":"/en/docs/api/animate"},"frontmatter":{"title":"Animate 动画","order":6}}},{"node":{"fields":{"slug":"/zh/docs/api/animate"},"frontmatter":{"title":"Animate 动画","order":6}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":6}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":6}}},{"node":{"fields":{"slug":"/en/examples/gallery/facet"},"frontmatter":{"title":"Facet","order":6}}},{"node":{"fields":{"slug":"/zh/examples/gallery/facet"},"frontmatter":{"title":"分面","order":6}}},{"node":{"fields":{"slug":"/en/docs/api/shape"},"frontmatter":{"title":"自定义 Shape","order":7}}},{"node":{"fields":{"slug":"/zh/docs/api/shape"},"frontmatter":{"title":"自定义 Shape","order":7}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/attribute"},"frontmatter":{"title":"Attribute 图形属性","order":7}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/attribute"},"frontmatter":{"title":"Attribute 图形属性","order":7}}},{"node":{"fields":{"slug":"/en/docs/api/interaction"},"frontmatter":{"title":"Interaction 交互","order":8}}},{"node":{"fields":{"slug":"/zh/docs/api/interaction"},"frontmatter":{"title":"Interaction 交互","order":8}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/coordinate"},"frontmatter":{"title":"Coordinate 坐标系","order":8}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/coordinate"},"frontmatter":{"title":"Coordinate 坐标系","order":8}}},{"node":{"fields":{"slug":"/en/docs/api/graphics"},"frontmatter":{"title":"Graphic 图形相关","order":9}}},{"node":{"fields":{"slug":"/zh/docs/api/graphics"},"frontmatter":{"title":"Graphic 图形相关","order":9}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/axis"},"frontmatter":{"title":"Axis 坐标轴","order":9}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/axis"},"frontmatter":{"title":"Axis 坐标轴","order":9}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/legend"},"frontmatter":{"title":"Legend 图例","order":10}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/legend"},"frontmatter":{"title":"Legend 图例","order":10}}},{"node":{"fields":{"slug":"/en/docs/api/options"},"frontmatter":{"title":"Options 配置项声明","order":10}}},{"node":{"fields":{"slug":"/zh/docs/api/options"},"frontmatter":{"title":"Options 配置项声明","order":10}}},{"node":{"fields":{"slug":"/en/docs/api/slider"},"frontmatter":{"title":"Slider 滑块插件","order":11}}},{"node":{"fields":{"slug":"/zh/docs/api/slider"},"frontmatter":{"title":"Slider 滑块插件","order":11}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":11}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":11}}},{"node":{"fields":{"slug":"/en/docs/api/data-set"},"frontmatter":{"title":"DataSet","order":12}}},{"node":{"fields":{"slug":"/zh/docs/api/data-set"},"frontmatter":{"title":"DataSet","order":12}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/guide"},"frontmatter":{"title":"Guide 辅助元素","order":12}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/guide"},"frontmatter":{"title":"Guide 辅助元素","order":12}}},{"node":{"fields":{"slug":"/en/docs/api/connector"},"frontmatter":{"title":"Connector 数据接入","order":13}}},{"node":{"fields":{"slug":"/zh/docs/api/connector"},"frontmatter":{"title":"Connector 数据接入","order":13}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/facet"},"frontmatter":{"title":"Facet 分面","order":13}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/facet"},"frontmatter":{"title":"Facet 分面","order":13}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/theme"},"frontmatter":{"title":"Theme 图表皮肤","order":14}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/theme"},"frontmatter":{"title":"Theme 图表皮肤","order":14}}},{"node":{"fields":{"slug":"/en/docs/api/transform"},"frontmatter":{"title":"Transform 数据转换","order":14}}},{"node":{"fields":{"slug":"/zh/docs/api/transform"},"frontmatter":{"title":"Transform 数据转换","order":14}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/label"},"frontmatter":{"title":"Label 图形文本","order":15}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/label"},"frontmatter":{"title":"Label 图形文本","order":15}}},{"node":{"fields":{"slug":"/en/docs/api/global"},"frontmatter":{"title":"Global 配置项","order":15}}},{"node":{"fields":{"slug":"/zh/docs/api/global"},"frontmatter":{"title":"Global 配置项","order":15}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/event"},"frontmatter":{"title":"图表事件","order":16}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/event"},"frontmatter":{"title":"图表事件","order":16}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/interaction"},"frontmatter":{"title":"图表交互","order":17}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/interaction"},"frontmatter":{"title":"图表交互","order":17}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/slider"},"frontmatter":{"title":"Slider 滑块插件","order":18}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/slider"},"frontmatter":{"title":"Slider 滑块插件","order":18}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/update-data"},"frontmatter":{"title":"数据异步加载与动态更新","order":19}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/update-data"},"frontmatter":{"title":"数据异步加载与动态更新","order":19}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/shape"},"frontmatter":{"title":"自定义 Shape","order":20}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/shape"},"frontmatter":{"title":"自定义 Shape","order":20}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/animate"},"frontmatter":{"title":"自定义动画","order":21}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/animate"},"frontmatter":{"title":"自定义动画","order":21}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/view"},"frontmatter":{"title":"创建 View","order":22}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/view"},"frontmatter":{"title":"创建 View","order":22}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/renderers"},"frontmatter":{"title":"选择 Canvas 还是 SVG","order":23}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/renderers"},"frontmatter":{"title":"选择 Canvas 还是 SVG","order":23}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/g2-v3-changes"},"frontmatter":{"title":"G2 3.0 升级指引","order":24}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/g2-v3-changes"},"frontmatter":{"title":"G2 3.0 升级指引","order":24}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"prev":{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":11},"html":"<p>提示信息 (tooltip)，是指当鼠标悬停在图表上的某点时，以提示框的形式展示该点的数据，比如该点的值，数据单位等。tooltip 内显示的信息完全可以通过格式化函数动态指定；通过调用 <code class=\"language-text\">chart.tooltip(false)</code> 即可不启用提示信息功能。<img src=\"https://gw.alipayobjects.com/zos/rmsportal/VLNhkKRALafPtDCIZFqA.png#align=left&#x26;display=inline&#x26;height=377&#x26;originHeight=420&#x26;originWidth=830&#x26;status=done&#x26;width=746\"></p>\n<h2 id=\"tooltip-配置语法\"><a href=\"#tooltip-%E9%85%8D%E7%BD%AE%E8%AF%AD%E6%B3%95\" aria-label=\"tooltip 配置语法 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>tooltip 配置语法</h2>\n<p>在 G2 中提供了个层次的配置 tooltip 的方法，</p>\n<ol>\n<li>设置在 chart 对象上的 tooltip 样式、功能相关的配置，</li>\n<li>设置在每个几何标记对象上的 tooltip 配置，具体如下：</li>\n</ol>\n<p>（1） chart 上的 tooltip 方法</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> cfg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 开启 tooltip，并设置 tooltip 配置信息</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span>cfg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 省略 true, 直接设置 tooltip 配置信息</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 关闭 tooltip</span>\n</code></pre></div>\n<p>常用的 tooltip 配置信息如下，注意，G2 的 tooltip 是使用 html 进行渲染的。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  triggerOn<span class=\"token punctuation\">:</span> <span class=\"token string\">'mousemove'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'click'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// tooltip 的触发方式，默认为 mousemove</span>\n  showTitle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>boolean<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 是否展示 title，默认为 true</span>\n  crosshairs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> <span class=\"token string\">'rect'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'x'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'y'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'cross'</span><span class=\"token punctuation\">,</span>\n    style<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 图形样式</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// tooltip 辅助线配置</span>\n  offset<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// tooltip 距离鼠标的偏移量</span>\n  containerTpl<span class=\"token punctuation\">:</span> <span class=\"token string\">'&lt;div class=\"g2-tooltip\">'</span>\n    <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;div class=\"g2-tooltip-title\" style=\"margin:10px 0;\">&lt;/div>'</span>\n    <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;ul class=\"g2-tooltip-list\">&lt;/ul>&lt;/div>'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// tooltip 容器模板</span>\n  itemTpl<span class=\"token punctuation\">:</span> <span class=\"token string\">'&lt;li data-index={index}>&lt;span style=\"background-color:{color};width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:8px;\">&lt;/span>{name}: {value}&lt;/li>'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// tooltip 每项记录的默认模板</span>\n  inPlot<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 将 tooltip 展示在指定区域内</span>\n  follow<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>， <span class=\"token comment\">// tooltip 是否跟随鼠标移动</span>\n  shared<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">||</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认为 true, false 表示只展示单条 tooltip</span>\n  position<span class=\"token punctuation\">:</span> <span class=\"token string\">'left'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'right'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'top'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'bottom'</span> <span class=\"token comment\">// 固定位置展示 tooltip</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"https://zos.alipayobjects.com/skylark/750725d4-2e58-4420-b886-4abe1c0335c2/attach/2378/ad8fe2daa557ad62/image.png#align=left&#x26;display=inline&#x26;height=171&#x26;originHeight=171&#x26;originWidth=362&#x26;status=done&#x26;width=362\"></p>\n<p>更详细的配置请查看 <a href=\"/g2/zh/docs/manual/api/chart#tooltip\">tooltip api</a>。</p>\n<p>（2）geom 对象上的 tooltip 配置</p>\n<ol>\n<li>可以在 geom 几何标记上配置 tooltip 的显示内容，如下语法所示：</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">chart<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span>geom<span class=\"token operator\">></span><span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token string\">'field1*field2...*fieldN'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>这个时候 tooltip 的显示内容如下：</p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/a92d121a-5879-42ad-b12c-1b4cc3c79f69/attach/2378/b8013e9dd10fd634/image.png#align=left&#x26;display=inline&#x26;height=186&#x26;originHeight=186&#x26;originWidth=250&#x26;status=done&#x26;width=250\"></p>\n<ul>\n<li>\n<p>使用回调函数自定义 tooltip 信息，默认情况下 tooltip 的每一项包含以下信息：</p>\n<ul>\n<li>title 标题，默认 tooltip 的标题取第一项的 title</li>\n<li>name 标题</li>\n<li>value 值</li>\n<li>color 图例项对应的颜色</li>\n<li>index 索引值</li>\n</ul>\n<p>在回调函数中可以通过修改这几个值，达到自定义 tooltip 的目的</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">chart<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span>geom<span class=\"token operator\">></span><span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a*b'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> a<span class=\"token punctuation\">,</span>\n    value<span class=\"token punctuation\">:</span> b\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>除了调用 <code class=\"language-text\">chart.tooltip(false)</code> 关闭 tooltip 外，还可以在 geom 上关闭 tooltip。配置方法如下：</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">point</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 id=\"配置示例\"><a href=\"#%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B\" aria-label=\"配置示例 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>配置示例</h2>\n<p>tooltip 的目的是为了展示数据点相关的数据，具体展示的内容完全可以通过多种灵活的方式来实现。</p>\n<h3 id=\"指定-tooltip-的显示信息\"><a href=\"#%E6%8C%87%E5%AE%9A-tooltip-%E7%9A%84%E6%98%BE%E7%A4%BA%E4%BF%A1%E6%81%AF\" aria-label=\"指定 tooltip 的显示信息 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>指定 tooltip 的显示信息</h3>\n<p>如果 G2 默认生成的 tooltip 展示内容不满足需求，用户可以通过调用几何标记的 tooltip 方法手动指定要显示的 tooltip 内容。</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2018/png/100996/1539840045868-74892c28-5126-448b-bfcc-3adcd75e9666.png#align=left&#x26;display=inline&#x26;height=242&#x26;originHeight=502&#x26;originWidth=1546&#x26;status=done&#x26;width=747\"></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">6.9</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">9.5</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">14.5</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">18.2</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">21.5</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">25.2</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">26.5</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">23.3</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">18.3</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">13.9</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> month<span class=\"token punctuation\">:</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> tem<span class=\"token punctuation\">:</span> <span class=\"token number\">9.6</span><span class=\"token punctuation\">,</span> city<span class=\"token punctuation\">:</span> <span class=\"token string\">'tokyo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token punctuation\">:</span> <span class=\"token string\">'c0'</span><span class=\"token punctuation\">,</span>\n  width<span class=\"token punctuation\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> defs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  month<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> <span class=\"token string\">'cat'</span><span class=\"token punctuation\">,</span>\n    alias<span class=\"token punctuation\">:</span> <span class=\"token string\">'月份'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 别名，如果没有别名显示成字段名 month</span>\n    values<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'一月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'二月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'三月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'四月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'五月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'六月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'七月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'八月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'九月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'十月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'十一月'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'十二月'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  tem<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    alias<span class=\"token punctuation\">:</span> <span class=\"token string\">'温度'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> defs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  showTitle<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认标题不显示</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart\n  <span class=\"token punctuation\">.</span><span class=\"token function\">line</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'month*tem'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token string\">'month*tem'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h3 id=\"格式化-tooltip-的显示内容\"><a href=\"#%E6%A0%BC%E5%BC%8F%E5%8C%96-tooltip-%E7%9A%84%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9\" aria-label=\"格式化 tooltip 的显示内容 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>格式化 tooltip 的显示内容</h3>\n<p>当需要格式化 tooltip 的显示内容时，有两种方式：</p>\n<ol>\n<li>大部分场景下，可以使用 <code class=\"language-text\">geom.tooltip(&#39;x*y*z&#39;, callback)</code> 同 <code class=\"language-text\">chart.tooltip({ itemTpl: &#39;xxx&#39;})</code> 的方式。</li>\n<li>对于复杂的场景，可以监听 chart 对象上的 <code class=\"language-text\">tooltip:change</code> 事件。这个事件会返回如下参数：</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  x<span class=\"token punctuation\">:</span> 当前鼠标的 x 坐标<span class=\"token punctuation\">,</span>\n  y<span class=\"token punctuation\">:</span> 当前鼠标的 y 坐标<span class=\"token punctuation\">,</span>\n  tooltip<span class=\"token punctuation\">:</span> 当前的 tooltip 对象\n  items<span class=\"token punctuation\">:</span> 数组对象，当前 tooltip 显示的每条内容\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>每一项的内容</p>\n<ul>\n<li>title 标题，默认 tooltip 的标题取第一项的 title</li>\n<li>name 标题</li>\n<li>value 值</li>\n<li>color 图例项对应的颜色</li>\n<li>index 索引值</li>\n</ul>\n<p>通过修改 items 的内容就可以修改 tooltip 的展示内容了。</p>\n<h4 id=\"使用-geomtooltip-回调\"><a href=\"#%E4%BD%BF%E7%94%A8-geomtooltip-%E5%9B%9E%E8%B0%83\" aria-label=\"使用 geomtooltip 回调 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用 geom.tooltip() 回调</h4>\n<p>这种方式通常需要同 chart.tooltip() 结合使用。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//自定义模板，自定义tooltip展示</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  itemTpl<span class=\"token punctuation\">:</span> <span class=\"token string\">'&lt;li>{x}: {y}&lt;/li>'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">line</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    x<span class=\"token punctuation\">,</span>\n    y\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 返回的参数名对应 itemTpl 中的变量名</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2018/png/100996/1539840100221-ae59cfe7-ad94-4125-9a4c-0663612bea7a.png#align=left&#x26;display=inline&#x26;height=402&#x26;originHeight=754&#x26;originWidth=1400&#x26;status=done&#x26;width=747\"></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Microsoft Internet Explorer'</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Chrome'</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Firefox'</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Safari'</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Opera'</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'Others'</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token punctuation\">:</span> <span class=\"token string\">'c1'</span><span class=\"token punctuation\">,</span>\n  forceFit<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">coord</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theta'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> innerRadius<span class=\"token punctuation\">:</span> <span class=\"token number\">0.6</span><span class=\"token punctuation\">,</span> radius<span class=\"token punctuation\">:</span> <span class=\"token number\">0.8</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  showTitle<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  itemTpl<span class=\"token punctuation\">:</span> <span class=\"token string\">'&lt;li>{name}: {value}&lt;/li>'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart\n  <span class=\"token punctuation\">.</span><span class=\"token function\">intervalStack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name*value'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">:</span> name<span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> value <span class=\"token operator\">+</span> <span class=\"token string\">'%'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4 id=\"监听-tooltipchange-事件\"><a href=\"#%E7%9B%91%E5%90%AC-tooltipchange-%E4%BA%8B%E4%BB%B6\" aria-label=\"监听 tooltipchange 事件 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>监听 tooltip:change 事件</h4>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2018/png/100996/1539840143991-d48324b5-e1f8-479b-97c1-107da3b62f73.png#align=left&#x26;display=inline&#x26;height=387&#x26;originHeight=842&#x26;originWidth=1622&#x26;status=done&#x26;width=747\"></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">// 数据</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token number\">1428163200000</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">:</span> <span class=\"token number\">469</span><span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">:</span> <span class=\"token number\">480</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token number\">1428163203600</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">:</span> <span class=\"token number\">480</span><span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">:</span> <span class=\"token number\">430</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token number\">1428163207200</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">:</span> <span class=\"token number\">430</span><span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">:</span> <span class=\"token number\">410</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token number\">1428163210800</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">:</span> <span class=\"token number\">410</span><span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">:</span> <span class=\"token number\">420</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token number\">1428163214400</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">:</span> <span class=\"token number\">420</span><span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">:</span> <span class=\"token number\">440</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token number\">1428163218000</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">:</span> <span class=\"token number\">440</span><span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">:</span> <span class=\"token number\">460</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token number\">1428163221600</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">:</span> <span class=\"token number\">460</span><span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">:</span> <span class=\"token number\">410</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token number\">1428163225200</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">:</span> <span class=\"token number\">410</span><span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">:</span> <span class=\"token number\">440</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token number\">1428163228800</span><span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">:</span> <span class=\"token number\">440</span><span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">:</span> <span class=\"token number\">490</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> DataView <span class=\"token operator\">=</span> DataSet<span class=\"token punctuation\">.</span>DataView<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dv <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndv<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  type<span class=\"token punctuation\">:</span> <span class=\"token string\">'map'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">callback</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">obj</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    obj<span class=\"token punctuation\">.</span>range <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>obj<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">.</span>end<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    obj<span class=\"token punctuation\">.</span>trend <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>start <span class=\"token operator\">&lt;=</span> obj<span class=\"token punctuation\">.</span>end <span class=\"token operator\">?</span> <span class=\"token string\">'上涨'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'下跌'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token punctuation\">:</span> <span class=\"token string\">'c2'</span><span class=\"token punctuation\">,</span>\n  width<span class=\"token punctuation\">:</span> <span class=\"token number\">800</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n  padding<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">95</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>dv<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  time<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 设置日期类型</span>\n    type<span class=\"token punctuation\">:</span> <span class=\"token string\">'time'</span><span class=\"token punctuation\">,</span>\n    mask<span class=\"token punctuation\">:</span> <span class=\"token string\">'YYYY-MM-DD HH:MM:ss'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  trend<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    alias<span class=\"token punctuation\">:</span> <span class=\"token string\">'趋势'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart\n  <span class=\"token punctuation\">.</span><span class=\"token function\">interval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'time*range'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'trend'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'#1bbd19'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#fa513a'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tooltip:change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">;</span> <span class=\"token comment\">// tooltip显示的项</span>\n  <span class=\"token keyword\">const</span> origin <span class=\"token operator\">=</span> items<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 将一条数据改成多条数据</span>\n  <span class=\"token keyword\">const</span> range <span class=\"token operator\">=</span> origin<span class=\"token punctuation\">.</span>point<span class=\"token punctuation\">.</span>_origin<span class=\"token punctuation\">.</span>range<span class=\"token punctuation\">;</span>\n  items<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 清空</span>\n  items<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token string\">'开始值'</span><span class=\"token punctuation\">,</span>\n        marker<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        value<span class=\"token punctuation\">:</span> range<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      origin<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  items<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">{</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token string\">'结束值'</span><span class=\"token punctuation\">,</span>\n        marker<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        value<span class=\"token punctuation\">:</span> range<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      origin<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h3 id=\"自定义-html-模板\"><a href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89-html-%E6%A8%A1%E6%9D%BF\" aria-label=\"自定义 html 模板 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自定义 html 模板</h3>\n<p>G2 也支持使用自定义的 html 展示 tooltip。配置方法如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  containerTpl<span class=\"token punctuation\">:</span>\n    <span class=\"token string\">'&lt;div class=\"g2-tooltip\">'</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">'&lt;div class=\"g2-tooltip-title\" style=\"margin:10px 0;\">&lt;/div>'</span> <span class=\"token operator\">+</span>\n    <span class=\"token string\">'&lt;ul class=\"g2-tooltip-list\">&lt;/ul>&lt;/div>'</span><span class=\"token punctuation\">,</span>\n  itemTpl<span class=\"token punctuation\">:</span>\n    <span class=\"token string\">'&lt;li data-index={index}>&lt;span style=\"background-color:{color};width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:8px;\">&lt;/span>{name}: {value}&lt;/li>'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">containerTpl</code> tooltip 容器模板 ，注意一定要包含以下 class:</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>g2-tooltip<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- tooltip 标题 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>g2-tooltip-title<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>10px 0<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- tooltip 内容列表容器 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>g2-tooltip-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">itemTpl</code> tooltip 每项记录的默认模板：</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">data-index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>{index}</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token comment\">&lt;!-- 每项记录的 marker --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token selector\">background-color:</span><span class=\"token punctuation\">{</span>color<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><span class=\"token property\">width</span><span class=\"token punctuation\">:</span>8px<span class=\"token punctuation\">;</span><span class=\"token property\">height</span><span class=\"token punctuation\">:</span>8px<span class=\"token punctuation\">;</span><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span>50%<span class=\"token punctuation\">;</span><span class=\"token property\">display</span><span class=\"token punctuation\">:</span>inline-block<span class=\"token punctuation\">;</span><span class=\"token property\">margin-right</span><span class=\"token punctuation\">:</span>8px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  {name}: {value}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>对于 tooltip 的显示样式的配置，用户可以：</p>\n<ol>\n<li>在自定义模板时使用内联的方式直接定义；</li>\n<li>在 html 页面的 style 标签内，为对应的 dom 标签设置样式；</li>\n<li>在 <code class=\"language-text\">chart.tooltip(cfg)</code> 中设置属性，如下，具体的说明详见 <a href=\"/g2/zh/docs/manual/api/chart#tooltip\">API</a></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'g2-tooltip'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    position<span class=\"token punctuation\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\n    visibility<span class=\"token punctuation\">:</span> <span class=\"token string\">'hidden'</span><span class=\"token punctuation\">,</span>\n    border<span class=\"token punctuation\">:</span> <span class=\"token string\">'1px solid #efefef'</span><span class=\"token punctuation\">,</span>\n    backgroundColor<span class=\"token punctuation\">:</span> <span class=\"token string\">'white'</span><span class=\"token punctuation\">,</span>\n    color<span class=\"token punctuation\">:</span> <span class=\"token string\">'#000'</span><span class=\"token punctuation\">,</span>\n    opacity<span class=\"token punctuation\">:</span> <span class=\"token string\">'0.8'</span><span class=\"token punctuation\">,</span>\n    padding<span class=\"token punctuation\">:</span> <span class=\"token string\">'5px 15px'</span><span class=\"token punctuation\">,</span>\n    transition<span class=\"token punctuation\">:</span> <span class=\"token string\">'top 200ms,left 200ms'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 设置 tooltip 的 css 样式</span>\n  <span class=\"token string\">'g2-tooltip-list'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    margin<span class=\"token punctuation\">:</span> <span class=\"token string\">'10px'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 id=\"其他配置\"><a href=\"#%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE\" aria-label=\"其他配置 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>其他配置</h2>\n<h3 id=\"显示辅助线（辅助框）\"><a href=\"#%E6%98%BE%E7%A4%BA%E8%BE%85%E5%8A%A9%E7%BA%BF%EF%BC%88%E8%BE%85%E5%8A%A9%E6%A1%86%EF%BC%89\" aria-label=\"显示辅助线（辅助框） permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>显示辅助线（辅助框）</h3>\n<p>默认线图和区域图会显示辅助线、柱状图会显示辅助框，当用户需要显示辅助线（框）时，可以通过配置 <code class=\"language-text\">crosshairs</code> 属性设置，crosshairs 支持四种展示形式：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">crosshairs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n  type<span class=\"token punctuation\">:</span> <span class=\"token string\">'rect'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'x'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'y'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'cross'</span><span class=\"token punctuation\">,</span>\n  style<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 图形样式</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// tooltip 辅助线配置</span></code></pre></div>\n<blockquote>\n<p>crosshairs.type 说明：</p>\n</blockquote>\n<ul>\n<li>rect: 矩形框</li>\n<li>x: 水平辅助线</li>\n<li>y: 垂直辅助线</li>\n<li>cross: 十字辅助线</li>\n</ul>\n<p>‘line’, ‘area’, ‘path’ 默认会展示垂直辅助线；‘interval’， 默认会展示矩形背景框。</p>\n<h3 id=\"改变-tooltip-触发方式\"><a href=\"#%E6%94%B9%E5%8F%98-tooltip-%E8%A7%A6%E5%8F%91%E6%96%B9%E5%BC%8F\" aria-label=\"改变 tooltip 触发方式 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>改变 tooltip 触发方式</h3>\n<p>通过配置 <code class=\"language-text\">triggerOn</code> 参数来改变 tooltip 的触发方式，可配置值为：</p>\n<ul>\n<li><code class=\"language-text\">mousemove</code>: 鼠标移动至目标区域触发，默认方式；</li>\n<li><code class=\"language-text\">click</code>: 鼠标点击目标区域触发</li>\n<li><code class=\"language-text\">none</code>: 不触发 tooltip，由用户调用 <code class=\"language-text\">chart.showTooltip(point)</code> 和 <code class=\"language-text\">chart.hideTooltip()</code> 来控制提示框的显示隐藏。</li>\n</ul>\n<p>当然在任何触发方式下，用户都可以通过调用 <code class=\"language-text\">chart.showTooltip(point)</code> 可以控制在固定的位置显示提示信息，参数 <code class=\"language-text\">point</code> 为画布上的坐标点，格式如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> point <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  x<span class=\"token punctuation\">:</span> <span class=\"token number\">23</span><span class=\"token punctuation\">,</span>\n  y<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>另外还提供了 <code class=\"language-text\">chart.getXY({xField: value, yField: value})</code> 方法，用于获取数据对应在画布空间的坐标。</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2018/png/100996/1539840191028-fded845c-8cdb-4112-8fbd-fe36bd588ab1.png#align=left&#x26;display=inline&#x26;height=301&#x26;originHeight=612&#x26;originWidth=1518&#x26;status=done&#x26;width=747\"></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 00:00:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 00:30:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 01:00:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 01:30:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 02:00:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 02:30:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 03:00:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 03:30:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 04:00:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 04:30:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 05:00:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> time<span class=\"token punctuation\">:</span> <span class=\"token string\">'2016-10-25 05:30:00'</span><span class=\"token punctuation\">,</span> runCount<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> runTime<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token punctuation\">:</span> <span class=\"token string\">'c3'</span><span class=\"token punctuation\">,</span>\n  forceFit<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n  padding<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">scale</span><span class=\"token punctuation\">(</span><span class=\"token string\">'time'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  type<span class=\"token punctuation\">:</span> <span class=\"token string\">'timeCat'</span><span class=\"token punctuation\">,</span>\n  mask<span class=\"token punctuation\">:</span> <span class=\"token string\">'HH:MM'</span><span class=\"token punctuation\">,</span>\n  tickCount<span class=\"token punctuation\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span>\n  nice<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">scale</span><span class=\"token punctuation\">(</span><span class=\"token string\">'runCount'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  alias<span class=\"token punctuation\">:</span> <span class=\"token string\">'运行数量'</span><span class=\"token punctuation\">,</span>\n  min<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">scale</span><span class=\"token punctuation\">(</span><span class=\"token string\">'runTime'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  alias<span class=\"token punctuation\">:</span> <span class=\"token string\">'运行时间(ms)'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  triggerOn<span class=\"token punctuation\">:</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 鼠标点击触发 tooltip</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 关闭 tooltip</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">legend</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 不显示图例</span>\nchart\n  <span class=\"token punctuation\">.</span><span class=\"token function\">line</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'time*runTime'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#5ed470'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token string\">'smooth'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 绘制曲线图</span>\nchart\n  <span class=\"token punctuation\">.</span><span class=\"token function\">point</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'time*runTime'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#5ed470'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token string\">'circle'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    cursor<span class=\"token punctuation\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 绘制点图</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 初始化到最新一个点</span>\n<span class=\"token keyword\">const</span> lastPoint <span class=\"token operator\">=</span> chart<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'plotRange'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>br<span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">showTooltip</span><span class=\"token punctuation\">(</span>lastPoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},"next":{"node":{"fields":{"slug":"/zh/docs/manual/advanced/deep-into-coord"},"frontmatter":{"title":"坐标系详解","order":3},"html":"<p>在视觉通道中识别度最高，同时支持定性（分类）数据和定量数据的视觉通道是位置 position。数据会被映射到空间的位置上，我们将这个空间定义成坐标系。常见的坐标系：</p>\n<ul>\n<li>直角坐标系（笛卡尔坐标系），有几个互相垂直的向量构成的空间，G2 中当前实现的是 x, y 两个基底向量构成的二维直角坐标系，三维坐标系后面的版本中提供。</li>\n<li>极坐标系，是使用一个角度值和半径值构成的坐标系，使用 x 轴表示角度，y 轴表示半径的长度。</li>\n<li>质心坐标系，使用三角形的三个顶点求得坐标点 u,v,w，且 w = 1-u-v，这个坐标系在三维绘图中广泛使用。</li>\n</ul>\n<p>目前 G2 中主要实现了直角坐标系和极坐标系，坐标系主要完成以下两个功能：</p>\n<ol>\n<li>将 0-1 区间内的数据映射到画布空间；</li>\n<li>将画布空间的数据，翻转回 0-1 的范围内。</li>\n</ol>\n<h2 id=\"g2-支持的坐标系\"><a href=\"#g2-%E6%94%AF%E6%8C%81%E7%9A%84%E5%9D%90%E6%A0%87%E7%B3%BB\" aria-label=\"g2 支持的坐标系 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>G2 支持的坐标系</h2>\n<table>\n<thead>\n<tr>\n<th align=\"left\">coordType</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code class=\"language-text\">rect</code></td>\n<td align=\"left\">直角坐标系，目前仅支持二维，由 x, y 两个互相垂直的坐标轴构成。</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">polar</code></td>\n<td align=\"left\">极坐标系，由角度和半径 2 个维度构成。</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">theta</code></td>\n<td align=\"left\">一种特殊的极坐标系，半径长度固定，仅仅将数据映射到角度，常用于饼图的绘制。</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">helix</code></td>\n<td align=\"left\">螺旋坐标系，基于阿基米德螺旋线。</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"坐标系和图形\"><a href=\"#%E5%9D%90%E6%A0%87%E7%B3%BB%E5%92%8C%E5%9B%BE%E5%BD%A2\" aria-label=\"坐标系和图形 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>坐标系和图形</h2>\n<p>坐标系类型的变换会改变几何标记的形状：在极坐标系中，矩形将变为圆环的一部分，而地图中两点间的最短路径也将不是直线。我们以直角坐标系下的柱状图为例，讲解图形在直角坐标系和极坐标系下的不同视觉效果。</p>\n<h3 id=\"直角坐标系\"><a href=\"#%E7%9B%B4%E8%A7%92%E5%9D%90%E6%A0%87%E7%B3%BB\" aria-label=\"直角坐标系 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>直角坐标系</h3>\n<p>柱状图在直角坐标系下，由四个点构建成的矩形构成：</p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/c15a3d43-30db-4fc4-9f33-1ceabb1a7d09/attach/1996/574d2c396f582fee/image.png\" alt=\"image | left\"></p>\n<p>在直角坐标系下，柱状图一般使用 x 轴方向映射数据的分类，y 轴方向映射数据的大小。</p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/57cc924d-1423-4161-8359-358f7713d70c/attach/1996/c53d9ae97e3affb6/image.png\" alt=\"image | left\"></p>\n<h3 id=\"极坐标系\"><a href=\"#%E6%9E%81%E5%9D%90%E6%A0%87%E7%B3%BB\" aria-label=\"极坐标系 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>极坐标系</h3>\n<p>柱状图到了极坐标下，依然由四个点连接而成，变化仅仅在于到圆心距离相等的两个点间的直线变成圆弧：</p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/942355ae-86b8-4cfe-8a21-ff71841893b1/attach/1996/54506bc5db4971ab/image.png\" alt=\"image | left\"></p>\n<p>在极坐标系下，柱状图就自然而然的转换成为了玫瑰图</p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/287e6a00-d259-483c-92db-4f39f6eca71a/attach/1996/2c6ffd501c395c52/image.png\" alt=\"image | left\"></p>\n<p>可视化的过程是数据到图形的映射过程，只要数据映射的通道一致，那么我们就可以使用统一的方式将图形在不同的坐标系下绘制出来。</p>\n<h3 id=\"层叠柱状图到嵌套环图\"><a href=\"#%E5%B1%82%E5%8F%A0%E6%9F%B1%E7%8A%B6%E5%9B%BE%E5%88%B0%E5%B5%8C%E5%A5%97%E7%8E%AF%E5%9B%BE\" aria-label=\"层叠柱状图到嵌套环图 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>层叠柱状图到嵌套环图</h3>\n<p>下图是一个只有一个分类的层叠柱状图：</p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/6c33b90e-df5f-40ae-ab0e-57df801ff125/attach/1996/8f29513d6190f2f4/image.png\" alt=\"image | left\"></p>\n<p>此时我们将坐标系转换成极坐标系，<code class=\"language-text\">chart.coord(&#39;polar&#39;)</code></p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/f52ff2e8-0095-4ae9-99ec-c1a1750fa208/attach/1996/3b0977291d9eb1be/image.png\" alt=\"image | left\"></p>\n<p>说明：由于分类只有一个，所以占有了整个圆环，y 轴表示数据的大小，该图也叫牛眼图。</p>\n<h3 id=\"层叠柱状图到饼图\"><a href=\"#%E5%B1%82%E5%8F%A0%E6%9F%B1%E7%8A%B6%E5%9B%BE%E5%88%B0%E9%A5%BC%E5%9B%BE\" aria-label=\"层叠柱状图到饼图 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>层叠柱状图到饼图</h3>\n<p>依然是上面的示例，我们将 x 轴、y 轴转置，y 轴表示数据的分类，x 轴表示数据的大小：</p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/6c0641df-b07f-4ac6-8db5-2136ab2e697b/attach/1996/e2977d10312b8168/image.png\" alt=\"image | left\"></p>\n<p>此时我们将坐标系转换成极坐标系：</p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/a7fd64d4-6892-4e02-a3f8-87ef642d6e6a/attach/1996/91f7a52863065471/image.png\" alt=\"image | left\"></p>\n<p>饼图就生成了，此时如果我们使用两个分类的数据，会出现什么效果？看下图：</p>\n<p><img src=\"https://zos.alipayobjects.com/skylark/8261fb69-d5c1-43a1-9c65-19a2d54c5420/attach/1996/3a8fb32c9095bf20/geom-multiple.gif\" alt=\"geom-multiple.gif | left\"></p>\n<p>此时就生成了嵌套的饼图。</p>\n<h2 id=\"坐标系和视觉通道\"><a href=\"#%E5%9D%90%E6%A0%87%E7%B3%BB%E5%92%8C%E8%A7%86%E8%A7%89%E9%80%9A%E9%81%93\" aria-label=\"坐标系和视觉通道 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>坐标系和视觉通道</h2>\n<p>上面我们讲解了相同的图形在不同坐标系下的不同展示效果，由于直角坐标系是两个垂直向量构建而成的，视觉通道都是 postion 的两个子通道（x, y)，而极坐标，是由角度和长度两个维度构建而成，角度和位置在视觉通道中的表现力有所差异：</p>\n<p><img src=\"https://zos.alipayobjects.com/rmsportal/SbFIAczdQaCpyKV.png\" alt=\"image | left\"></p>\n<p>所以在使用图形和坐标系时需要理解清晰数据字段和视觉通道的映射关系，在合适的场景选择合适的视觉通道。</p>\n<h2 id=\"坐标系的接口设计\"><a href=\"#%E5%9D%90%E6%A0%87%E7%B3%BB%E7%9A%84%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1\" aria-label=\"坐标系的接口设计 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>坐标系的接口设计</h2>\n<p>结合上面的内容，直角坐标系和极坐标系必须具有功能：</p>\n<ol>\n<li>可指定在画布上的范围，通过指定起始点、结束点。需要明确的是，画布的坐标起始点和 G2 图表的坐标起始点是不同的。</li>\n</ol>\n<p><img src=\"https://zos.alipayobjects.com/skylark/99e7ccac-b372-475b-a7f3-ae8cd7f83b6b/attach/1996/4675bdea80f7beb4/image.png\" alt=\"image | left\"></p>\n<ol>\n<li>将数据从 0-1 映射到画布坐标，将画布上的坐标反转回数据 0-1 的范围内</li>\n<li>坐标系的平移、旋转、放大缩小、镜像等转置功能</li>\n</ol>\n<h3 id=\"属性\"><a href=\"#%E5%B1%9E%E6%80%A7\" aria-label=\"属性 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>属性</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">属性名</th>\n<th align=\"left\">含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">start</td>\n<td align=\"left\">坐标系的起始点</td>\n</tr>\n<tr>\n<td align=\"left\">end</td>\n<td align=\"left\">坐标系的结束点</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"方法\"><a href=\"#%E6%96%B9%E6%B3%95\" aria-label=\"方法 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>方法</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">方法名</th>\n<th align=\"left\">含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">convert(point)</td>\n<td align=\"left\">将数据从 0-1 空间映射到画布空间</td>\n</tr>\n<tr>\n<td align=\"left\">invert(point)</td>\n<td align=\"left\">将数据从画布空间反转回 0-1 空间</td>\n</tr>\n<tr>\n<td align=\"left\">translate(x,y)</td>\n<td align=\"left\">平移</td>\n</tr>\n<tr>\n<td align=\"left\">rotate(angle)</td>\n<td align=\"left\">旋转</td>\n</tr>\n<tr>\n<td align=\"left\">scale(sx, sy)</td>\n<td align=\"left\">方法、缩小</td>\n</tr>\n<tr>\n<td align=\"left\">transpose()</td>\n<td align=\"left\">x, y 交换</td>\n</tr>\n<tr>\n<td align=\"left\">reflect()</td>\n<td align=\"left\">镜像，默认进行 y 轴镜像，也可以指定 x 轴、xy 双轴镜像等</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"极坐标的特殊属性\"><a href=\"#%E6%9E%81%E5%9D%90%E6%A0%87%E7%9A%84%E7%89%B9%E6%AE%8A%E5%B1%9E%E6%80%A7\" aria-label=\"极坐标的特殊属性 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>极坐标的特殊属性</h3>\n<p>由于极坐标是由角度和半径长度两个维度共同构成的，所以有自己特有的属性：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">方法名</th>\n<th align=\"left\">含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">radius</td>\n<td align=\"left\">半径长度，0-1 范围内的数值，最终的半径长度 = min（长，宽） / 2 * radius</td>\n</tr>\n<tr>\n<td align=\"left\">innerRadius</td>\n<td align=\"left\">plus 坐标系下，内部空白的半径大小，空白的半径 = min（长，宽） / 2 * inner</td>\n</tr>\n<tr>\n<td align=\"left\">startAngle</td>\n<td align=\"left\">极坐标的起始角度</td>\n</tr>\n<tr>\n<td align=\"left\">endAngle</td>\n<td align=\"left\">极坐标的结束角度</td>\n</tr>\n</tbody>\n</table>\n<p>指定了起始角度、结束角度的玫瑰图：</p>\n<p><img src=\"https://zos.alipayobjects.com/basement/skylark/0ad680ae14790910901892109d17d3/attach/4080/900/image.png\" alt=\"image | left\"></p>"}}}}}